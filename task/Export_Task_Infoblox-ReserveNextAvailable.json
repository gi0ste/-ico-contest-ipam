[{"Body":{"ClassId":"workflow.CustomDataTypeDefinition","Description":"The Classless Inter-Domain Routing","Label":"CIDR Notation","Name":"CDIR","ObjectType":"workflow.CustomDataTypeDefinition","ParameterSet":[],"Properties":{"ObjectType":"workflow.CustomDataTypeProperties"},"SharedScope":"user","Tags":[{"Key":"owner","Value":"sgioia"}],"TypeDefinition":[{"Default":{"ObjectType":"workflow.DefaultValue"},"DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"CIDR Notation","Name":"CDIR","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"ObjectType":"workflow.Constraints","Regex":"^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])(\\/(3[0-2]|[1-2][0-9]|[0-9]))$"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"}}]},"ClassId":"bulk.RestSubRequest","ObjectType":"bulk.RestSubRequest","TargetMoid":"","Uri":"/v1/workflow/CustomDataTypeDefinitions","Verb":"POST"},{"Body":{"ClassId":"workflow.CustomDataTypeDefinition","Description":"IETF/IEEE MAC Address format","Label":"MAC Address","Name":"macAddress","ObjectType":"workflow.CustomDataTypeDefinition","ParameterSet":[],"Properties":{"ObjectType":"workflow.CustomDataTypeProperties"},"SharedScope":"user","Tags":[{"Key":"owner","Value":"sgioia"}],"TypeDefinition":[{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"IETF/IEEE MAC Address format","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"MAC Address","Name":"macAddress","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"ObjectType":"workflow.Constraints","Regex":"^([0-9A-Fa-f]{2}[:-]){5}([0-9A-Fa-f]{2})|([0-9a-fA-F]{4}\\\\.[0-9a-fA-F]{4}\\\\.[0-9a-fA-F]{4})$"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"}}]},"ClassId":"bulk.RestSubRequest","ObjectType":"bulk.RestSubRequest","TargetMoid":"","Uri":"/v1/workflow/CustomDataTypeDefinitions","Verb":"POST"},{"Body":{"ClassId":"workflow.CustomDataTypeDefinition","Description":"An IPv4 address represented in dot decimal notation, such as '192.168.1.6'.","Label":"IPv4 Address","Name":"IpV4AddressType","ObjectType":"workflow.CustomDataTypeDefinition","ParameterSet":[],"Properties":{"ObjectType":"workflow.CustomDataTypeProperties"},"SharedScope":"shared","TypeDefinition":[{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"An IPv4 address represented in dot decimal notation, such as '192.168.1.6'.","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"IPv4 Address","Name":"IpV4Address","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"ObjectType":"workflow.Constraints","Regex":"^([1-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\\.([1-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])$"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"}}]},"ClassId":"bulk.RestSubRequest","ObjectType":"bulk.RestSubRequest","TargetMoid":"","Uri":"/v1/workflow/CustomDataTypeDefinitions","Verb":"POST"},{"Body":{"ClassId":"workflow.TaskDefinition","DefaultVersion":true,"Description":"Delete an IPv4 Reservation in a given network, passing the IPv4 address Refence Object.","Label":"Infoblox - Delete IPv4 Reservation","Name":"Infoblox-DeleteIPv4Reservation","ObjectType":"workflow.TaskDefinition","Properties":{"ExternalMeta":true,"InputDefinition":[{"CustomDataTypeProperties":{"CatalogMoid":"shared","ObjectType":"workflow.CustomDataProperty"},"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"The API call can be made to Intersight or an external endpoint added as Target. Target should be in claimed or connected state. Please refer Supported Endpoints section in the Web API request end user documentation for the list of Intersight Targets on which Web API task can be invoked. An empty value for this input indicates that the API call is made to Intersight.\n","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"External Target","Name":"Target","ObjectType":"workflow.TargetDataType","Properties":[{"DisplayAttributes":["Name","TargetType"],"ObjectType":"workflow.TargetProperty","Selector":"/api/v1/asset/Targets?$filter=((TargetType eq HTTPEndpoint and Status eq Claimed) or ((TargetType eq PureStorageFlashArray or TargetType eq HitachiVirtualStoragePlatform or TargetType eq NetAppActiveIqUnifiedManager or TargetType eq TerraformCloud or TargetType eq VmwareVcenter or TargetType eq APIC) and Status eq Connected))","SelectorProperty":{"Method":"GET","ObjectType":"workflow.SelectorProperty"},"SupportedObjects":["asset.Target"]}],"Required":true},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"The Infoblox unique object reference to identify the IPv4 address.","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"IPv4 Address Reference Object","Name":"ipAddressReferenceObject","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"},"Required":true}],"ObjectType":"workflow.Properties","OutputDefinition":[{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"The Infoblox response.","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Output","Name":"Output","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"}}],"RetryCount":3,"RetryDelay":60,"RetryPolicy":"Fixed","SupportStatus":"Supported","Timeout":600,"TimeoutPolicy":"Timeout"},"RollbackTasks":[],"SharedScope":"user","Tags":[{"Key":"integration","Value":"infoblox"},{"Key":"category","Value":"IPAM"},{"Key":"owner","Value":"sgioia"}],"Version":1},"ClassId":"bulk.RestSubRequest","ObjectType":"bulk.RestSubRequest","TargetMoid":"","Uri":"/v1/workflow/TaskDefinitions","Verb":"POST"},{"Body":{"ClassId":"workflow.TaskDefinition","DefaultVersion":true,"Description":"Reserve next available IPv4 in a given network, passing a MAC address","Label":"Infoblox - Reserve Next Available","Name":"Infoblox-ReserveNextAvailable","ObjectType":"workflow.TaskDefinition","Properties":{"ExternalMeta":true,"InputDefinition":[{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"CIDR Network to get the IP","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Network","Name":"network","ObjectType":"workflow.CustomDataType","Properties":{"CatalogMoid":"user","CustomDataTypeName":"CDIR","ObjectType":"workflow.CustomDataProperty"},"Required":true},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"The MAC Address to be assigned","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"MAC Address","Name":"macAddress","ObjectType":"workflow.CustomDataType","Properties":{"CatalogMoid":"user","CustomDataTypeName":"macAddress","ObjectType":"workflow.CustomDataProperty"},"Required":true},{"CustomDataTypeProperties":{"CatalogMoid":"shared","ObjectType":"workflow.CustomDataProperty"},"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"The API call can be made to Intersight or an external endpoint added as Target. Target should be in claimed or connected state. Please refer Supported Endpoints section in the Web API request end user documentation for the list of Intersight Targets on which Web API task can be invoked. An empty value for this input indicates that the API call is made to Intersight.\n","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"External Target","Name":"Target","ObjectType":"workflow.TargetDataType","Properties":[{"DisplayAttributes":["Name","TargetType"],"ObjectType":"workflow.TargetProperty","Selector":"/api/v1/asset/Targets?$filter=((TargetType eq HTTPEndpoint and Status eq Claimed) or ((TargetType eq PureStorageFlashArray or TargetType eq HitachiVirtualStoragePlatform or TargetType eq NetAppActiveIqUnifiedManager or TargetType eq TerraformCloud or TargetType eq VmwareVcenter or TargetType eq APIC) and Status eq Connected))","SelectorProperty":{"Method":"GET","ObjectType":"workflow.SelectorProperty"},"SupportedObjects":["asset.Target"]}],"Required":true}],"ObjectType":"workflow.Properties","OutputDefinition":[{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"The returned available IPv4 as a String","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"IPv4 Address","Name":"ipV4Address","ObjectType":"workflow.CustomDataType","Properties":{"CatalogMoid":"shared","CustomDataTypeName":"IpV4AddressType","ObjectType":"workflow.CustomDataProperty"},"Required":true},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"The unique Reference Object for the IPv4 address. This reference is used to identify the IPv4 in Infoblox..","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"referenceObjectID","Name":"referenceObjectID","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"},"Required":true},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"The associated MAC address","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"MAC Address","Name":"macAddress","ObjectType":"workflow.CustomDataType","Properties":{"CatalogMoid":"user","CustomDataTypeName":"macAddress","ObjectType":"workflow.CustomDataProperty"}}],"RetryCount":3,"RetryDelay":60,"RetryPolicy":"Fixed","SupportStatus":"Supported","Timeout":600,"TimeoutPolicy":"Timeout"},"RollbackTasks":[{"CatalogMoid":"user","Description":"Delete an IPv4 Reservation in a given network, passing the IPv4 address Refence Object.","InputParameters":{"Target":{"Moid":"6203bca86f72612d31dd3521","ObjectType":"asset.Target"},"ipAddressReferenceObject":"${task.output.referenceObjectID}"},"Name":"Infoblox-DeleteIPv4Reservation","ObjectType":"workflow.RollbackTask","Version":1}],"SharedScope":"user","Tags":[{"Key":"integration","Value":"infoblox"},{"Key":"category","Value":"IPAM"},{"Key":"owner","Value":"sgioia"}],"Version":1},"ClassId":"bulk.RestSubRequest","ObjectType":"bulk.RestSubRequest","TargetMoid":"","Uri":"/v1/workflow/TaskDefinitions","Verb":"POST"},{"Body":{"Batch":[{"ContentType":"json","Description":"Delete the reservation for a given IP address ","EndpointRequestType":"Internal","Label":"Delete an IPv4 Reservation","Method":"DELETE","Name":"InvokeGenericWebApi1","ObjectType":"workflow.WebApi","Outcomes":[{"Condition":"{{eq .global.InvokeGenericWebApi1.output.HttpStatusCode 400}}","Message":"{{ .global.InvokeGenericWebApi1.output.response }}","Name":"Bad Request","Type":"TerminalError"},{"Condition":"{{gt .global.InvokeGenericWebApi1.output.HttpStatusCode 201}}","Message":"{{.global.InvokeGenericWebApi1.output.HttpStatusMsg}}","Name":"Error","Type":"TerminalError"}],"Protocol":"https","ResponseSpec":{"ErrorParameters":[],"ObjectType":"content.Grammar","Parameters":[{"AcceptSingleValue":false,"ComplexType":"","ItemType":"simple","Name":"response","ObjectType":"content.Parameter","Path":"$","Secure":false,"Type":"string"}],"Types":[]},"TargetType":"Endpoint","Url":"/wapi/v2.7/{{.global.task.input.ipAddressReferenceObject}}&_return_as_object=1"}],"ClassId":"workflow.BatchApiExecutor","Constraints":{"ObjectType":"workflow.TaskConstraints"},"Description":"Delete an IPv4 Reservation in a given network, passing the IPv4 address Refence Object.","Name":"Infoblox - Delete IPv4 Reservation","ObjectType":"workflow.BatchApiExecutor","Output":{"Output":"{{.global.InvokeGenericWebApi1.output.response}}"},"SharedScope":"user","TaskDefinition":{"ObjectType":"workflow.TaskDefinition","Selector":"Name eq \"Infoblox-DeleteIPv4Reservation\" and Version eq 1"}},"ClassId":"bulk.RestSubRequest","ObjectType":"bulk.RestSubRequest","TargetMoid":"","Uri":"/v1/workflow/BatchApiExecutors","Verb":"POST"},{"Body":{"Batch":[{"Body":"{\n\t\"ipv4addr\":\"func:nextavailableip:{{.global.task.input.network}}\",\n\t\"mac\":\"{{.global.task.input.macAddress}}\"\n}","ContentType":"json","Description":"Reserve next available IPv4 in a given network, by passing network and a MAC address","EndpointRequestType":"Internal","Label":"Reserve next available IPv4","Method":"POST","Name":"InvokeGenericWebApi1","ObjectType":"workflow.WebApi","Outcomes":[{"Condition":"{{eq .global.InvokeGenericWebApi1.output.HttpStatusCode 400}}","Message":"{{.global.InvokeGenericWebApi1.output.textMessage}}","Name":"Bad Request","Type":"TerminalError"},{"Condition":"{{eq .global.InvokeGenericWebApi1.output.HttpStatusCode 400}}","Message":"{{.global.InvokeGenericWebApi1.output.HttpStatusMsg}}","Name":"Error","Type":"TerminalError"}],"Protocol":"https","ResponseSpec":{"ErrorParameters":[],"ObjectType":"content.Grammar","Parameters":[{"AcceptSingleValue":false,"ComplexType":"","ItemType":"simple","Name":"ipv4AddressReferenceObject","ObjectType":"content.Parameter","Path":"$._ref","Secure":false,"Type":"string"},{"AcceptSingleValue":false,"ComplexType":"","ItemType":"simple","Name":"ipv4Address","ObjectType":"content.Parameter","Path":"$.ipv4addr","Secure":false,"Type":"string"},{"AcceptSingleValue":false,"ComplexType":"","ItemType":"simple","Name":"macAddress","ObjectType":"content.Parameter","Path":"$.mac","Secure":false,"Type":"string"},{"AcceptSingleValue":false,"ComplexType":"","ItemType":"simple","Name":"fullRsponse","ObjectType":"content.Parameter","Path":"$","Secure":false,"Type":"json"},{"AcceptSingleValue":false,"ComplexType":"","ItemType":"simple","Name":"textMessage","ObjectType":"content.Parameter","Path":"$.text","Secure":false,"Type":"string"}],"Types":[]},"TargetType":"Endpoint","Url":"/wapi/v2.7/fixedaddress?_return_fields%2B=ipv4addr,mac"}],"ClassId":"workflow.BatchApiExecutor","Constraints":{"ObjectType":"workflow.TaskConstraints"},"Description":"Reserve next available IPv4 in a given network, passing a MAC address","Name":"Infoblox - Reserve Next Available","ObjectType":"workflow.BatchApiExecutor","Output":{"availableIP":"{{.global.InvokeGenericWebApi1.output.ipv4Address}}","availableIPs":"{{.global.InvokeGenericWebApi1.output.ipv4Address}}","ipV4Address":"{{.global.InvokeGenericWebApi1.output.ipv4Address}}","macAddress":"{{.global.InvokeGenericWebApi1.output.macAddress}}","referenceObjectID":"{{.global.InvokeGenericWebApi1.output.ipv4AddressReferenceObject}}"},"SharedScope":"user","TaskDefinition":{"ObjectType":"workflow.TaskDefinition","Selector":"Name eq \"Infoblox-ReserveNextAvailable\" and Version eq 1"}},"ClassId":"bulk.RestSubRequest","ObjectType":"bulk.RestSubRequest","TargetMoid":"","Uri":"/v1/workflow/BatchApiExecutors","Verb":"POST"}]